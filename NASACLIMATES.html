<html><head><base href="https://nasa.gov/"><title>ClimateGuardian: NASA's Early Warning System</title><link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@300;400;700&display=swap" rel="stylesheet"><script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script><style>
body, html {
  margin: 0;
  padding: 0;
  font-family: 'Exo 2', sans-serif;
  background-color: #000814;
  color: #E0E1DD;
  overflow-x: hidden;
}

.app-container {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

header {
  background: linear-gradient(135deg, #001F54, #034078);
  padding: 20px;
  text-align: center;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

h1 {
  margin: 0;
  font-size: 2.5em;
  color: #FFC300;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
}

.globe-container {
  flex-grow: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
}

#globeCanvas {
  width: 100%;
  height: 100%;
}

.overlay {
  position: absolute;
  top: 20px;
  left: 20px;
  background: rgba(3, 64, 120, 0.8);
  border-radius: 10px;
  padding: 20px;
  max-width: 300px;
}

.event-list {
  list-style-type: none;
  padding: 0;
}

.event-item {
  background: rgba(255, 195, 0, 0.1);
  margin-bottom: 10px;
  padding: 10px;
  border-radius: 5px;
  cursor: pointer;
  transition: background 0.3s ease;
  display: flex;
  align-items: center;
}

.event-item:hover {
  background: rgba(255, 195, 0, 0.2);
}

.rocket-button {
  background: none;
  border: none;
  cursor: pointer;
  margin-right: 10px;
  transition: transform 0.3s ease;
}

.rocket-button:hover {
  transform: translateY(-5px);
}

.rocket-icon {
  width: 30px;
  height: 30px;
}

.modal {
  display: none;
  position: fixed;
  z-index: 1;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgba(0,0,0,0.4);
  animation: fadeIn 0.3s;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.modal-content {
  background: linear-gradient(135deg, #001F54, #034078);
  margin: 15% auto;
  padding: 20px;
  border: 1px solid #FFC300;
  width: 70%;
  max-width: 600px;
  border-radius: 15px;
  box-shadow: 0 4px 8px rgba(255, 195, 0, 0.2);
}

.close {
  color: #FFC300;
  float: right;
  font-size: 28px;
  font-weight: bold;
}

.close:hover,
.close:focus {
  color: #FFD60A;
  text-decoration: none;
  cursor: pointer;
}

.pulse {
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0% {
    transform: scale(0.95);
    box-shadow: 0 0 0 0 rgba(255, 195, 0, 0.7);
  }
  
  70% {
    transform: scale(1);
    box-shadow: 0 0 0 10px rgba(255, 195, 0, 0);
  }
  
  100% {
    transform: scale(0.95);
    box-shadow: 0 0 0 0 rgba(255, 195, 0, 0);
  }
}

.recommendations {
  background: rgba(3, 64, 120, 0.8);
  border-radius: 10px;
  padding: 20px;
  margin-top: 20px;
}

.recommendation-list {
  list-style-type: none;
  padding: 0;
}

.recommendation-item {
  background: rgba(255, 195, 0, 0.1);
  margin-bottom: 10px;
  padding: 10px;
  border-radius: 5px;
}

.notification-bar {
  background: #FFC300;
  color: #000814;
  text-align: center;
  padding: 10px;
  font-weight: bold;
  display: none;
}

</style></head><body>
<div class="app-container">
  <header>
    <h1>ClimateGuardian: NASA's Early Warning System</h1>
  </header>
  
  <div class="notification-bar" id="notificationBar">
    New climate event detected! Check the map for details.
  </div>

  <div class="globe-container">
    <canvas id="globeCanvas"></canvas>
    <div class="overlay">
      <h2>Active Climate Events</h2>
      <ul class="event-list" id="eventList">
        <!-- Event items will be dynamically added here -->
      </ul>
    </div>
  </div>

  <div id="eventModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2 id="modalTitle"></h2>
      <p id="modalDescription"></p>
      <div class="recommendations">
        <h3>Safety Recommendations</h3>
        <ul class="recommendation-list" id="recommendationList">
          <!-- Recommendations will be dynamically added here -->
        </ul>
      </div>
    </div>
  </div>
</div>

<script>
let scene, camera, renderer, globe;
let eventMarkers = [];

function initScene() {
  scene = new THREE.Scene();
  camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
  renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('globeCanvas'), antialias: true });
  renderer.setSize(window.innerWidth, window.innerHeight);

  const geometry = new THREE.SphereGeometry(5, 32, 32);
  const texture = new THREE.TextureLoader().load('https://i.imgur.com/ggPxsfd.jpg');
  const material = new THREE.MeshPhongMaterial({ map: texture });
  globe = new THREE.Mesh(geometry, material);
  scene.add(globe);

  const light = new THREE.PointLight(0xffffff, 1, 100);
  light.position.set(10, 10, 10);
  scene.add(light);

  camera.position.z = 15;

  animate();
}

function animate() {
  requestAnimationFrame(animate);
  globe.rotation.y += 0.005;
  renderer.render(scene, camera);
}

function addEventMarker(lat, lon, eventType) {
  const phi = (90 - lat) * (Math.PI / 180);
  const theta = (lon + 180) * (Math.PI / 180);
  const radius = 5.1;

  const x = -radius * Math.sin(phi) * Math.cos(theta);
  const y = radius * Math.cos(phi);
  const z = radius * Math.sin(phi) * Math.sin(theta);

  const markerGeometry = new THREE.SphereGeometry(0.1, 16, 16);
  const markerMaterial = new THREE.MeshBasicMaterial({ color: getEventColor(eventType) });
  const marker = new THREE.Mesh(markerGeometry, markerMaterial);
  
  marker.position.set(x, y, z);
  scene.add(marker);
  eventMarkers.push(marker);

  addEventToList(eventType, lat, lon);
}

function getEventColor(eventType) {
  switch(eventType) {
    case 'Hurricane': return 0xff0000;
    case 'Wildfire': return 0xffa500;
    case 'Flood': return 0x0000ff;
    default: return 0xffffff;
  }
}

function addEventToList(eventType, lat, lon) {
  const eventList = document.getElementById('eventList');
  const listItem = document.createElement('li');
  listItem.className = 'event-item pulse';
  
  const rocketButton = document.createElement('button');
  rocketButton.className = 'rocket-button';
  rocketButton.innerHTML = `
    <svg class="rocket-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M4.5 16.5C3.12 15.12 2.25 13.2 2.25 11.25C2.25 7.52208 5.27208 4.5 9 4.5C12.7279 4.5 15.75 7.52208 15.75 11.25C15.75 13.2 14.88 15.12 13.5 16.5M4.5 16.5L2.25 18.75M4.5 16.5L7.5 19.5M13.5 16.5L15.75 18.75M13.5 16.5L10.5 19.5M9 6.75V15.75M9 15.75L6 18.75M9 15.75L12 18.75" stroke="#FFC300" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  `;
  rocketButton.onclick = () => showEventDetails(eventType, lat, lon);
  
  const eventText = document.createElement('span');
  eventText.textContent = `${eventType} near ${lat.toFixed(2)}, ${lon.toFixed(2)}`;
  
  listItem.appendChild(rocketButton);
  listItem.appendChild(eventText);
  eventList.appendChild(listItem);
}

function showEventDetails(eventType, lat, lon) {
  const modal = document.getElementById('eventModal');
  const modalTitle = document.getElementById('modalTitle');
  const modalDescription = document.getElementById('modalDescription');
  const recommendationList = document.getElementById('recommendationList');

  modalTitle.textContent = `${eventType} Alert`;
  modalDescription.textContent = `A ${eventType.toLowerCase()} has been detected near ${lat.toFixed(2)}, ${lon.toFixed(2)}. Please follow these safety recommendations:`;

  recommendationList.innerHTML = '';
  const recommendations = getRecommendations(eventType);
  recommendations.forEach(rec => {
    const li = document.createElement('li');
    li.className = 'recommendation-item';
    li.textContent = rec;
    recommendationList.appendChild(li);
  });

  modal.style.display = 'block';
}

function getRecommendations(eventType) {
  switch(eventType) {
    case 'Hurricane':
      return [
        'Evacuate if instructed by local authorities',
        'Secure your home and outdoor objects',
        'Prepare an emergency kit with food, water, and supplies',
        'Stay informed through local news and weather updates',
        'Avoid floodwaters and storm surge areas'
      ];
    case 'Wildfire':
      return [
        'Be ready to evacuate at a moment\'s notice',
        'Create a defensible space around your home',
        'Close all windows and doors to prevent ember intrusion',
        'Follow local air quality advisories',
        'Have an emergency supply kit prepared'
      ];
    case 'Flood':
      return [
        'Move to higher ground immediately',
        'Do not walk or drive through floodwaters',
        'Prepare your home by moving valuables to upper floors',
        'Follow evacuation orders promptly',
        'Be cautious of electrocution risks in flooded areas'
      ];
    default:
      return ['Stay alert and follow instructions from local authorities'];
  }
}

// Close modal when clicking on <span> (x)
document.getElementsByClassName('close')[0].onclick = function() {
  document.getElementById('eventModal').style.display = 'none';
}

// Close modal when clicking outside of it
window.onclick = function(event) {
  const modal = document.getElementById('eventModal');
  if (event.target == modal) {
    modal.style.display = 'none';
  }
}

function showNotification() {
  const notificationBar = document.getElementById('notificationBar');
  notificationBar.style.display = 'block';
  setTimeout(() => {
    notificationBar.style.display = 'none';
  }, 5000);
}

// Simulating new events
function simulateNewEvent() {
  const eventTypes = ['Hurricane', 'Wildfire', 'Flood'];
  const randomEvent = eventTypes[Math.floor(Math.random() * eventTypes.length)];
  const lat = Math.random() * 180 - 90;
  const lon = Math.random() * 360 - 180;
  
  addEventMarker(lat, lon, randomEvent);
  showNotification();
}

window.onload = () => {
  initScene();
  // Add initial events
  addEventMarker(28.7041, -80.7041, 'Hurricane');
  addEventMarker(-33.8688, 151.2093, 'Wildfire');
  addEventMarker(35.6762, 139.6503, 'Flood');
  
  // Simulate new events every 30 seconds
  setInterval(simulateNewEvent, 30000);
}

window.onresize = () => {
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
}
</script>
</body></html>